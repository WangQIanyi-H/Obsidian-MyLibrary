本文将介绍，在使用RenderDoc软件在游戏中进行截帧后，该如何利用rdc文件，来导出世界坐标的模型，从而还原游戏场景。

本篇文章将从以下几个方面对该流程进行阐述
- 导出单个模型：使用renderdoc的python接口、fbxsdk对单个drawcall进行导出，在此处创建材质，匹配贴图，介绍导出贴图的一些坑（renderdoc版本，python版本）
- 找到变换矩阵：通过找到vp矩阵或者vp矩阵的逆，将模型从local space转换到world space（在转换过程中会有误差）
- 进行批量导出：该如何进行批量导出，批量导出时需要注意到的一些坑
- 导入Unity中并生成Prefab，对场景进行还原：将模型导入Unity后，将如何批量生成Prefab及其lod，并且采用Prefab的实例化方式来代替一个个的模型

# 单个模型导出
想要还原整个世界场景，首先要从导出单个模型开始。
我们先熟悉一下renderdoc中的一些基本概念。
首先是Renderdoc中的Event Browser页面
![[Pasted image 20231127171316.png]]
## Event
在RenderDoc中，事件（Event）指的是各种图形API的调用。这些事件可以包括
1. 绘制调用：这些是图形应用程序中最常见的事件之一，涉及到将几何数据（如顶点）送入图形管线进行渲染。
2. 状态改变：这些事件涉及到改变图形管线的状态，例如改变混合模式、剪裁设置或其它渲染状态。
3. 资源操作：包括创建、修改、删除纹理、缓冲区等图形资源的事件。
4. 分发计算调用：在使用计算着色器时执行的调用，这些着色器不直接涉及渲染，而是用于各种计算任务。
5. 内存操作：例如复制或更新缓冲区或纹理的内容。
在RenderDoc中，可以通过事件浏览器（Event Browser）来查看这些事件。它允许用户逐一检查每个事件。
## Action
在默认情况下，Event Browser只列出一系列的动作（Action），动作指的是诸如绘制、分发、复制、清除、解析等事件（Event），这些事件通常会使得GPU开始运作，有时会影响内存或资源（如纹理和缓冲区）。一般来说，单个的动作（Action）会被称作一个DrawCall。但是为了和真实的光栅化绘制相区分，Renderdoc使用了“动作（Action）”来代替了DrawCall这一说法来减少歧义。

# 还原世界坐标

# 批量导出
